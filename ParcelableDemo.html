<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">

    <link rel="icon" type="image/png" href="images/favicon.png" />
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />

    <script src="https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js?autoload=true&amp;lang=css" defer="defer"></script>

    <title>Androiddev by ramdroid</title>
  </head>

  <body>

    <header>
      <div class="container">
        <h1>Parcelable</h1>
        <h2>Exchange data between Android components</h2>

	<a href="index.html" class="btn btn-home"><span class="icon"></span>Home</a>
	<a href="contact.html" class="btn btn-contact"><span class="icon"></span>Contact</a>

      </div>
    </header>

    <div class="container">
      <section id="main_content">
        <h3>Problem</h3>

<p>When you launch an activity or service you often need to attach some information. In a simple situation this could only be a single value like an integer or string and you can use something like that:</p>

<pre class="prettyprint">Intent intent = new Intent(this, NewActivity.class);
intent.putExtra("value", 42);
startActivity(intent);
</pre>

<p>If you are using a lot more values then this approach would be little awkward. It would also be useful if you could forward your own classes with an intent.</p>

<h3>Solution</h3>

<p>Actually it's quite easy to do so: you only have to extend your class from <code>Parcelable</code> and define a <code>Parcelable.Creator</code>:</p>

<pre class="prettyprint">public static final Parcelable.Creator&lt;SomeData&gt; CREATOR = 
    new Parcelable.Creator&lt;SomeData>() {

    public SomeData createFromParcel(Parcel in) {
        return new SomeData(in);
    }

    public SomeData[] newArray(int size) {
        return new SomeData[size];
    }
};
</pre>

<p>Then define the functions to read/write the values into the <code>Parcel</code>:</p>

<pre class="prettyprint">@Override
public void writeToParcel(Parcel out, int flags) {
    out.writeInt(someInteger);
    out.writeString(someString);
}

private SomeData(Parcel in) {
    this.someInteger = in.readInt();
    this.someString = in.readString();
}
</pre>

<p>You only need to be careful to read the values in the same order as you wrote them.</p>

<h3>Advanced</h3>

<p>In some use cases you might have a list of your <code>Parcelable</code> objects. You need to use them like that:</p>

<pre class="prettyprint">public List&lt;SomeData&gt; someDataList = new ArrayList&lt;SomeData&gt;();

@Override
public void writeToParcel(Parcel out, int flags) {
    out.writeTypedList(someDataList);
}

private SomeData(Parcel in) {
    in.readTypedList(someDataList, SomeData.CREATOR);
}
</pre>

<h3>Auto-generator</h3>

<p>There's a generator that automatically generates the <code>Parcel</code> read/write functions for you. You only need to enter your class members and the builder does all the work:<p>

<a href="http://dallasgutauckis.com/2012/01/20/parcelabler-for-implementing-androids-parcelable-interface/" target="_blank">http://dallasgutauckis.com/2012/01/20/parcelabler-for-implementing-androids-parcelable-interface/</a>

<p>Of course this only works for known data types. If you have your own data types (like the SomeData list in the example above) then it will not work.</p></p>

<h3>Sample code</h3>

<p>Check out the full sample project on Github! Fork and send me a pull request if you want to contribute...</p>

      <a href="https://github.com/ramdroid/androiddev/tree/master/ParcelableDemo" class="btn btn-github" target="_blank">
        <span class="icon"></span>View sample</a>

      <a href="http://developer.android.com/reference/android/os/Parcelable.html" class="btn btn-android" target="_blank">
        <span class="icon"></span>Reference API</a>

    </section>
    </div>

    
  </body>
</html>
